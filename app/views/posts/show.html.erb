<%# TODO - format the code and split it in partials %>
<h2>Your post</h2>
<%= @post.content %>
<%= image_tag @post.image.variant(resize_to_limit: [400, 400])%>
<%= render 'shared/comment_form' %>
<% @post.comments.each do |comment| %>
  <%= render 'shared/post_comment', comment: comment %>
<% end %>
<%= link_to "Back", :back %>
<%#  TODO - move the like form from show page %>
<% if liked?(@post) %>
  <%= render 'shared/dislike', post: @post %>
<% else %>
  <%= render 'shared/like', post: @post %>
<% end %>
<script type="text/javascript">
  $("#micropost_image").bind("change", function() {
    const size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("Maximum file size is 5MB. Please choose a smaller file.");
      $("#micropost_image").val("");
    }
  });
</script>